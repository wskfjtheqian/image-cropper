<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>image-cropper</title>
</head>
<body style="display: flex">
<canvas id="image-cropper" width="800" height="800"></canvas>
<img id="image-preview" src="" alt="Preview" style="display: none; width: 300px; height: 300px; object-fit: contain;">

<script type="module" src="/src/main.ts"></script>
<script type="module">
    import ImageCropper from "./src/main.js";

    const cropper = new ImageCropper(document.getElementById('image-cropper'));


    const image = new Image();
    image.crossOrigin = "anonymous"; // 必须在 src 之前设置
    image.src = 'https://img-s.msn.cn/tenant/amp/entityid/AA1HWO7G.img';
    cropper.setImage(image)

    setInterval(() => {
        cropper.toDataUrl().then((url) => {
            const preview = document.getElementById('image-preview')
            preview.src = url
            preview.style.display = 'block'
        })
    }, 33.3333)
</script>
</body>

</html>
